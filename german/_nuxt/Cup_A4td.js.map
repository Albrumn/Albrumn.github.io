{"version":3,"file":"Cup_A4td.js","sources":["../../../../components/Login/Create.vue"],"sourcesContent":["<script setup lang=\"ts\">\r\n    import {\r\n        useAppStore,\r\n        useAuthStore } from '#imports';\r\n    import { useFormRules } from '~/composables/useFormRules';\r\n\r\n    /* Store variables */\r\n    const { brandIcon, siteName, tagLine } = storeToRefs(useAppStore());\r\n    const authStore = useAuthStore();\r\n    const { isPending } = storeToRefs(authStore);\r\n    const { signUp } = authStore;\r\n    const { emailRequired, required } = useFormRules();\r\n\r\n    /* Private variables */\r\n    const _email = ref<string>('');\r\n    const _errorMsg = ref<string>('');\r\n    const _password_new = ref<string>('');\r\n    const _password_confirm = ref<string>('');\r\n    const _successConfirmed = ref<boolean>(false);\r\n    const _serverFailureConfirmed = ref<boolean>(false);\r\n\r\n    /* UI references */\r\n    const form = ref<HTMLFormElement>();\r\n\r\n    /**\r\n     * Create a new user account based on the form data.\r\n     */\r\n    async function createAccount(): Promise<void> {\r\n        if (!form.value) return;\r\n        \r\n        const { valid } = await form.value.validate();\r\n        if (!valid) return;\r\n\r\n        if (_password_new.value !== _password_confirm.value) {\r\n            _errorMsg.value = 'New password and confirm password must match.';\r\n        }\r\n        else {\r\n            _errorMsg.value = await signUp(_email.value, _password_new.value);\r\n        }\r\n\r\n        _successConfirmed.value = _errorMsg.value === '';\r\n        _serverFailureConfirmed.value = !_successConfirmed.value;\r\n    }\r\n</script>\r\n\r\n<template>\r\n    <div>\r\n        <div class=\"text-center my-6\">\r\n            <v-icon :icon=\"brandIcon\" size=\"x-large\" color=\"primary\" />\r\n            <h2 class=\"brand-font\">{{ siteName }}</h2>\r\n            <p class=\"text-h6 my-3\" style=\"color: rgb(var(--v-theme-primary));\">\r\n                We look forward to working together!\r\n            </p>\r\n            <div class=\"mx-auto text-left\" style=\"width: fit-content\">\r\n                <ul>\r\n                    <li>Access your schedules from any device</li>\r\n                    <li>Use templates to make scheduling easy</li>\r\n                    <li>Manage employee scheduling requests</li>\r\n                </ul>\r\n            </div>\r\n        </div>\r\n        <v-card\r\n            class=\"mx-auto\"\r\n            :class=\"$vuetify.display.mobile ? 'rounded-0' : ''\"\r\n            width=\"400\"\r\n            :disabled=\"isPending\">\r\n            <v-toolbar\r\n                :title=\"_successConfirmed ? 'Success' : 'Create an Account'\"\r\n                class=\"px-3\"\r\n                color=\"surface\"\r\n                density=\"compact\" />\r\n            <v-card-text>\r\n                <v-expand-transition>\r\n                    <div v-show=\"!_successConfirmed\">\r\n                        <v-form ref=\"form\"\r\n                            validate-on=\"submit\">\r\n                            <v-text-field\r\n                                label=\"E-mail\"\r\n                                v-model=\"_email\"\r\n                                :rules=\"[emailRequired]\"\r\n                                @keydown.enter.exact.prevent=\"createAccount\" />\r\n                            <v-text-field\r\n                                label=\"Password\"\r\n                                v-model=\"_password_new\"\r\n                                type=\"password\"\r\n                                :rules=\"[required]\"\r\n                                @keydown.enter.exact.prevent=\"createAccount\" />\r\n                            <v-text-field\r\n                                label=\"Confirm Password\"\r\n                                v-model=\"_password_confirm\"\r\n                                type=\"password\"\r\n                                :rules=\"[required]\"\r\n                                @keydown.enter.exact.prevent=\"createAccount\" />\r\n                            <v-expand-transition>\r\n                                <div v-show=\"_serverFailureConfirmed\">\r\n                                    <p class=\"error-message\">\r\n                                        {{ _errorMsg.replace('Email', 'E-mail').replace('email', 'E-mail') }}\r\n                                    </p>\r\n                                </div>\r\n                            </v-expand-transition>\r\n                        </v-form>\r\n                    </div>\r\n                </v-expand-transition>\r\n                <v-expand-transition>\r\n                    <div v-show=\"_successConfirmed\">\r\n                        Your account has been created.\r\n                    </div>\r\n                </v-expand-transition>\r\n            </v-card-text>\r\n            <div class=\"pa-3\">\r\n                <v-btn v-if=\"!_successConfirmed\"\r\n                    class=\"w-100 call-to-action-2\"\r\n                    @click=\"createAccount\">\r\n                    Create\r\n                </v-btn>\r\n                <v-btn v-else\r\n                    class=\"w-100\"\r\n                    color=\"primary\">\r\n                    <!--to=\"/login\">-->\r\n                    <!--Continue to Log In-->\r\n                    Please check your E-mail to confirm your account.\r\n                </v-btn>\r\n            </div>\r\n            <v-expand-transition>\r\n                <div v-show=\"!_successConfirmed\"\r\n                    class=\"pa-3 pt-0\">\r\n                    <div class=\"d-flex justify-center align-center\">\r\n                        <span class=\"text-body-2\">\r\n                            Already have an account?\r\n                        </span>\r\n                        <v-btn\r\n                            class=\"text-body-2 my-0 ml-1\"\r\n                            color=\"primary\"\r\n                            variant=\"text\"\r\n                            to=\"/login\">\r\n                            Log In\r\n                        </v-btn>\r\n                    </div>\r\n                </div>\r\n            </v-expand-transition>\r\n        </v-card>\r\n    </div>\r\n</template>"],"names":["brandIcon","siteName","tagLine","storeToRefs","useAppStore","authStore","useAuthStore","isPending","signUp","emailRequired","required","useFormRules","_email","ref","_errorMsg","_password_new","_password_confirm","_successConfirmed","_serverFailureConfirmed","form","createAccount","valid"],"mappings":"ohBAOI,KAAM,CAAE,UAAAA,EAAW,SAAAC,EAAU,QAAAC,GAAYC,EAAYC,GAAa,EAC5DC,EAAYC,EAAa,EACzB,CAAE,UAAAC,CAAA,EAAcJ,EAAYE,CAAS,EACrC,CAAE,OAAAG,GAAWH,EACb,CAAE,cAAAI,EAAe,SAAAC,CAAS,EAAIC,EAAa,EAG3CC,EAASC,EAAY,EAAE,EACvBC,EAAYD,EAAY,EAAE,EAC1BE,EAAgBF,EAAY,EAAE,EAC9BG,EAAoBH,EAAY,EAAE,EAClCI,EAAoBJ,EAAa,EAAK,EACtCK,EAA0BL,EAAa,EAAK,EAG5CM,EAAON,EAAqB,EAKlC,eAAeO,GAA+B,CACtC,GAAA,CAACD,EAAK,MAAO,OAEjB,KAAM,CAAE,MAAAE,CAAM,EAAI,MAAMF,EAAK,MAAM,SAAS,EACvCE,IAEDN,EAAc,QAAUC,EAAkB,MAC1CF,EAAU,MAAQ,gDAGlBA,EAAU,MAAQ,MAAMN,EAAOI,EAAO,MAAOG,EAAc,KAAK,EAGlDE,EAAA,MAAQH,EAAU,QAAU,GACtBI,EAAA,MAAQ,CAACD,EAAkB,MAAA"}