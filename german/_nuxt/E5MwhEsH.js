import{w as E,X as W,Y as k,x as n,y as X,z as L,A as l,j as a,M as j,D as e,V as h,B as q,E as i,Z as T,_ as Z,G as J,H as m,$ as A,a0 as w,W as I,C as D,a1 as N,U as C,I as p,R as Y,S as Q,a2 as ee,F as ae,O as le,a3 as te,a4 as se,a5 as oe}from"./BRqMo8IP.js";import{u as G,a as M}from"./KBROkaNN.js";import{V as H,u as O}from"./CZMsRZdR.js";import{V as B}from"./BvNOZEBD.js";import{V as U}from"./Bqc71K6w.js";import{V as ne}from"./BM9C_Wz4.js";import{V as re}from"./B5dCJpDQ.js";import{V as z}from"./Czywj7Tc.js";import"./DWGaNmQL.js";/* empty css        */import"./Dzc29oMP.js";const ie={class:"mb-3"},ue={class:"error-message"},de=E({__name:"RequestReset",setup($,{expose:x}){const f=W({resolve:o=>{},reject:o=>{}}),{txt:r}=k(G()),b=M(),{isPending:V}=k(b),{recoverPassword:P}=b,{emailRequired:F}=O(),v=n(!1),s=n(""),d=n(""),c=n(!1),u=n(!1),_=n();async function R(o){return v.value=!0,s.value=o,c.value=!1,u.value=!1,new Promise((t,y)=>{f.resolve=t,f.reject=y})}async function g(){if(!_.value)return;const{valid:o}=await _.value.validate();o&&(d.value=await P(s.value),u.value=d.value==="",c.value=!u.value)}function S(o=!1){f.resolve(o),v.value=!1}return x({open:R}),(o,t)=>(L(),X(ne,{modelValue:e(v),"onUpdate:modelValue":t[1]||(t[1]=y=>I(v)?v.value=y:null),width:"auto","max-width":"400",persistent:e(V)},{default:l(()=>[a(j,{title:e(r).passwordDialog.title,disabled:e(V)},{default:l(()=>[a(h,null,{default:l(()=>[q(i("div",null,[a(T,null,{default:l(()=>[a(Z,{indeterminate:"",color:"primary",style:J(e(V)?"opacity: 1":"opacity: 0")},null,8,["style"]),i("div",ie,m(e(r).passwordDialog.body),1),a(H,{ref_key:"form",ref:_,"validate-on":"submit"},{default:l(()=>[a(B,{label:e(r).email,modelValue:e(s),"onUpdate:modelValue":t[0]||(t[0]=y=>I(s)?s.value=y:null),rules:[e(F)],onKeydown:A(w(g,["exact","prevent"]),["enter"])},null,8,["label","modelValue","rules","onKeydown"]),a(h,null,{default:l(()=>[q(i("div",null,[i("p",ue,m(e(d)),1)],512),[[D,e(c)]])]),_:1})]),_:1},512)]),_:1}),a(N,{class:"px-3"},{default:l(()=>[a(U),a(C,{color:"primary",disabled:!e(s)||e(s).length===0,elevation:!e(s)||e(s).length===0?0:4,onClick:w(g,["stop"])},{default:l(()=>[p(m(e(r).send),1)]),_:1},8,["disabled","elevation"]),a(C,{density:"compact",disabled:e(V),color:"secondary",onClick:w(S,["stop"])},{default:l(()=>[p(m(e(r).cancel),1)]),_:1},8,["disabled"])]),_:1})],512),[[D,!e(u)]])]),_:1}),a(h,null,{default:l(()=>[q(i("div",null,[a(T,null,{default:l(()=>[p(m(e(r).passwordDialog.successMessage)+" "+m(e(s))+". ",1)]),_:1}),a(N,{class:"px-3"},{default:l(()=>[a(U),a(C,{color:"primary",elevation:"4",onClick:w(S,["stop"])},{default:l(()=>[p(m(e(r).ok),1)]),_:1})]),_:1})],512),[[D,e(u)]])]),_:1})]),_:1},8,["title","disabled"])]),_:1},8,["modelValue","persistent"]))}}),ce={class:"text-center my-6"},me={class:"error-message"},fe={class:"pa-3"},pe={class:"text-body-2 text-center color-secondary pb-3"},ve=E({__name:"Form",setup($){const{brandIcon:x,siteName:f}=k(G()),r=M(),{isLoggedIn:b}=k(r),{fetchProfile:V,logIn:P}=r,{emailRequired:F,required:v}=O(),s=n(""),d=n(""),c=n(!1),u=n(""),_=n(),R=n();async function g(){if(!_.value)return;const{valid:o}=await _.value.validate();o&&(d.value=await P(s.value,u.value),c.value=d.value!=="",!c.value&&(d.value=await V(),c.value=d.value!=="",!c.value&&await te("/account")))}function S(){R.value&&R.value.open()}return(o,t)=>{const y=de;return L(),Y(Q,null,[i("div",ce,[a(ee,{icon:e(x),size:"64",color:"primary"},null,8,["icon"])]),a(j,{class:ae(["mx-auto",o.$vuetify.display.mobile?"rounded-0":""]),width:"400",disabled:e(b)},{default:l(()=>[a(le,{title:"Log In",class:"px-3",color:"surface",density:"compact"}),a(T,null,{default:l(()=>[a(H,{ref_key:"form",ref:_,"validate-on":"submit"},{default:l(()=>[a(re,null,{default:l(()=>[a(z,null,{default:l(()=>[a(B,{label:"E-mail",modelValue:e(s),"onUpdate:modelValue":t[0]||(t[0]=K=>I(s)?s.value=K:null),rules:[e(F)],onKeydown:A(w(g,["exact","prevent"]),["enter"])},null,8,["modelValue","rules","onKeydown"])]),_:1}),a(z,{class:"ga-2 align-center"},{default:l(()=>[a(B,{label:"Password",modelValue:e(u),"onUpdate:modelValue":t[1]||(t[1]=K=>I(u)?u.value=K:null),type:"password",rules:[e(v)],onKeydown:A(w(g,["exact","prevent"]),["enter"])},null,8,["modelValue","rules","onKeydown"]),a(C,{class:"text-caption my-0 px-2",color:"primary",variant:"text",onClick:S},{default:l(()=>t[2]||(t[2]=[p(" Forgot Password ")])),_:1})]),_:1})]),_:1}),a(h,null,{default:l(()=>[q(i("div",null,[i("p",me,m(e(d).replace("Email","E-mail")),1)],512),[[D,e(c)]])]),_:1})]),_:1},512)]),_:1}),i("div",fe,[a(C,{class:"w-100",color:"primary",onClick:g},{default:l(()=>t[3]||(t[3]=[p(" Log In ")])),_:1})]),i("div",pe,[p(m(e(f))+" is currently in development. ",1),t[4]||(t[4]=i("br",null,null,-1)),t[5]||(t[5]=p(" At the moment it is not possible to create an account. "))])]),_:1},8,["class","disabled"]),a(y,{ref_key:"requestReset",ref:R},null,512)],64)}}}),he=E({__name:"index",setup($){const{isRedirect:x,isReload:f}=k(M());return se(()=>{x.value&&(f.value&&(f.value=!1,oe()),console.error("Your session expired. Please log in again."))}),(r,b)=>(L(),Y("div",null,[a(e(ve))]))}});export{he as default};
//# sourceMappingURL=E5MwhEsH.js.map
