import{w as M,Y as S,x as r,ae as G,R as $,z as i,E as m,y as c,af as A,j as a,a2 as H,D as e,A as o,Z as B,V as b,B as x,_ as O,G as W,W as k,$ as F,a0 as v,H as Z,C as P,a1 as J,U as K,I as w,a3 as Q,F as R,M as z,O as X}from"./DoQLRuHK.js";import{V as ee,u as ae}from"./Dsn7bKOs.js";import{u as se,a as oe}from"./BVkePoiX.js";import{V as h}from"./COt8qJ3r.js";import{V as I}from"./DuA5ZkFT.js";import"./DWGaNmQL.js";/* empty css        */const te={class:"text-center my-6"},le={class:"error-message"},ne=M({__name:"UpdatePassword",async setup(D){let y,_;const{brandIcon:V,isMobile:L}=S(se()),T=oe(),{isPending:U}=S(T),{changePassword:Y,getUser:j}=T,{required:E}=ae(),p=r(""),f=r(""),l=r(""),t=r(""),N=r(!1),d=r(!1),g=r();async function C(){if(!g.value)return;const{valid:n}=await g.value.validate();n&&(t.value!==l.value?f.value="New password and confirm password must match.":f.value=await Y(t.value),d.value=f.value==="",N.value=!d.value)}async function q(){const n=await j();p.value=n.email}return[y,_]=G(()=>q()),await y,_(),(n,s)=>(i(),$("div",null,[m("div",te,[a(H,{icon:e(V),size:"64",color:"primary"},null,8,["icon"])]),e(p)!==""?(i(),c(z,{key:0,title:"Password Update",class:R(["mx-auto",e(L)?"rounded-0":""]),width:"400",disabled:e(U)},{default:o(()=>[a(B,null,{default:o(()=>[a(b,null,{default:o(()=>[x(m("div",null,[a(O,{indeterminate:"",color:"primary",style:W(e(U)?"opacity: 1":"opacity: 0")},null,8,["style"]),a(ee,{ref_key:"form",ref:g,"validate-on":"submit"},{default:o(()=>[a(h,{label:"E-mail",modelValue:e(p),"onUpdate:modelValue":s[0]||(s[0]=u=>k(p)?p.value=u:null),style:{"pointer-events":"none"},readonly:""},null,8,["modelValue"]),a(h,{label:"New Password",modelValue:e(t),"onUpdate:modelValue":s[1]||(s[1]=u=>k(t)?t.value=u:null),type:"password",rules:[e(E)],onKeydown:F(v(C,["exact","prevent"]),["enter"])},null,8,["modelValue","rules","onKeydown"]),a(h,{label:"Confirm Password",modelValue:e(l),"onUpdate:modelValue":s[2]||(s[2]=u=>k(l)?l.value=u:null),type:"password",rules:[e(E)],onKeydown:F(v(C,["exact","prevent"]),["enter"])},null,8,["modelValue","rules","onKeydown"]),a(b,null,{default:o(()=>[x(m("div",null,[m("p",le,Z(e(f).replace("Email","E-mail").replace("email","E-mail")),1)],512),[[P,e(N)]])]),_:1})]),_:1},512)],512),[[P,!e(d)]])]),_:1}),a(b,null,{default:o(()=>[x(m("div",null," Your password has been updated. ",512),[[P,e(d)]])]),_:1})]),_:1}),a(J,{class:"px-3"},{default:o(()=>[a(I),e(d)?(i(),c(K,{key:1,color:"primary",elevation:"4",onClick:s[3]||(s[3]=v(u=>("navigateTo"in n?n.navigateTo:e(Q))("/login"),["stop"]))},{default:o(()=>s[5]||(s[5]=[w(" Continue to Log In ")])),_:1})):(i(),c(K,{key:0,color:"primary",disabled:!e(t)||e(t).length===0||!e(l)||e(l).length===0,elevation:!e(t)||e(t).length===0||!e(l)||e(l).length===0?0:4,onClick:v(C,["stop"])},{default:o(()=>s[4]||(s[4]=[w(" Update ")])),_:1},8,["disabled","elevation"])),e(d)?(i(),c(I,{key:2})):A("",!0)]),_:1})]),_:1},8,["class","disabled"])):n._isPending?A("",!0):(i(),c(z,{key:1,class:R(["mx-auto",n.$vuetify.display.mobile?"rounded-0":""]),width:"400"},{default:o(()=>[a(X,{title:"Account Receipt Error",color:"error",density:"compact"}),a(B,null,{default:o(()=>s[6]||(s[6]=[w(" No account data received. "),m("br",null,null,-1),w(" Your password reset link may have expired. ")])),_:1})]),_:1},8,["class"]))]))}}),fe=M({__name:"index",setup(D){return(y,_)=>{const V=ne;return i(),$("div",null,[a(V)])}}});export{fe as default};
//# sourceMappingURL=BOzqeaAl.js.map
